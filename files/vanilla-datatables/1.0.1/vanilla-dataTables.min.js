/*!
 *
 * Vanilla-DataTables
 * Copyright (c) 2015-2017 Karl Saunders (http://mobiuswebdesign.co.uk)
 * Licensed under MIT (http://www.opensource.org/licenses/mit-license.php)
 *
 * Version: 1.0.0
 *
 */
!function(a,b){var c="DataTable";"function"==typeof define&&define.amd?define([],b(c)):"object"==typeof exports?module.exports=b(c):a[c]=b(c)}(this,function(a){"use strict";function l(a,d){var e=this,f={perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!0,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",sortable:!0,searchable:!0,fixedColumns:!1,fixedHeight:!1,truncatePager:!0,pagerDelta:2};if(e.options=b.extend(f,d),!a)throw new Error("The plugin requires a table as the first parameter");if("table"!=a.tagName.toLowerCase())throw new Error("The selected element is not a table.");if(null===a.tHead&&e.options.sortable){if(!e.options.data)throw new Error("The sortable option requires table headings.");if(!e.options.data.headings)throw new Error("You seem to be using the data option, but you've not defined any headings.")}if(!a.tBodies.length){if(!e.options.data)throw new Error("You don't seem to have a tbody in your table.");if(!e.options.data.rows)throw new Error("You seem to be using the data option, but you've not defined any rows.")}if(a.tBodies.length&&!a.tBodies[0].rows.length){if(!e.options.data)throw new Error("You don't seem to have any rows in your table.");if(!e.options.data.rows)throw new Error("You seem to be using the data option, but you've not defined any rows.")}e.table=a,e.isIE=!!/(msie|trident)/i.test(navigator.userAgent),e.currentPage=1,e.onFirstPage=!0,c.call(e),setTimeout(function(){e.emit("datatable.init")},10)}var b={extend:function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},each:function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,d,a[d],a);else for(var e=0,f=a.length;e<f;e++)b.call(c,e,a[e],a)},createElement:function(a,b){var c=document,d=c.createElement(a);if(b&&"object"==typeof b){var e;for(e in b)"html"===e?d.innerHTML=b[e]:"text"===e?d.appendChild(c.createTextNode(b[e])):d.setAttribute(e,b[e])}return d},createFragment:function(){return document.createDocumentFragment()},hasClass:function(a,b){return a.classList?a.classList.contains(b):!!a.className&&!!a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},addClass:function(a,c){b.hasClass(a,c)||(a.classList?a.classList.add(c):a.className=a.className.trim()+" "+c)},removeClass:function(a,c){b.hasClass(a,c)&&(a.classList?a.classList.remove(c):a.className=a.className.replace(new RegExp("(^|\\s)"+c.split(" ").join("|")+"(\\s|$)","gi")," "))},append:function(a,b){return a&&b&&a.appendChild(b)},listen:function(a,b,c,d){a.addEventListener(b,function(a){c.call(d||this,a)},!1)},getBoundingRect:function(a){var b=window,c=document,d=c.body,e=a.getBoundingClientRect(),f=void 0!==b.pageXOffset?b.pageXOffset:(c.documentElement||d.parentNode||d).scrollLeft,g=void 0!==b.pageYOffset?b.pageYOffset:(c.documentElement||d.parentNode||d).scrollTop;return{bottom:e.bottom+g,height:e.height,left:e.left+f,right:e.right+f,top:e.top+g,width:e.width}},preventDefault:function(a){if(a=a||window.event,a.preventDefault)return a.preventDefault()},includes:function(a,b){return a.indexOf(b)>-1},button:function(a,c,d){return b.createElement("li",{class:a,html:'<a href="#" data-page="'+c+'">'+d+"</a>"})},flush:function(a,b){if(b)for(;a.hasChildNodes();)a.removeChild(a.firstChild);else a.innerHTML=""}},c=function(){var a=this;a.options.data&&j.call(a),a.tbody=a.table.tBodies[0];var c=b.createElement("div",{class:"dataTable-wrapper"});a.container=b.createElement("div",{class:"dataTable-container"}),a.label=b.createElement("div",{class:"dataTable-info"});var d=b.createElement("div",{class:"dataTable-top"}),e=b.createElement("div",{class:"dataTable-bottom"});if(a.options.perPageSelect){var f=b.createElement("label",{class:"dataTable-selectWrapper"}),g=b.createElement("select",{class:"dataTable-selector"});b.each(a.options.perPageSelect,function(a,c){b.append(g,b.createElement("option",{value:c,html:c}))}),g.value=a.options.perPage,b.append(f,g),f.insertAdjacentHTML("beforeend"," entries per page"),b.append(d,f),b.listen(g,"change",function(b){a.options.perPage=parseInt(this.value,10),a.update(),a.options.fixedHeight&&h.call(a),a.emit("datatable.perpage")})}if(a.options.searchable){var i=b.createElement("div",{class:"dataTable-search"});a.input=b.createElement("input",{type:"text",class:"dataTable-input",placeholder:"Search..."}),b.append(i,a.input),b.append(d,i),b.addClass(d,"searchable"),b.listen(a.input,"keyup",function(b){a.search(this.value)})}if(a.options.sortable){var l=a.table.tHead.rows[0].cells;b.each(l,function(a,c){var d=b.createElement("a",{href:"#",class:"dataTable-sorter",html:c.innerHTML});c.idx=a,c.innerHTML="",b.append(c,d)}),b.listen(a.table.tHead,"click",function(c){c=c||window.event;var d=c.target;"a"===d.nodeName.toLowerCase()&&b.hasClass(d,"dataTable-sorter")&&(a.sortColumn(d.parentNode.idx),b.preventDefault(c))})}if(b.addClass(a.table,"dataTable-table"),b.append(e,a.label),b.append(c,d),b.append(c,a.container),b.append(c,e),a.paginator=b.createElement("ul",{class:"dataTable-pagination"}),b.append(e,a.paginator),b.listen(a.paginator,"click",function(c){var d=c.target;"a"===d.nodeName.toLowerCase()&&d.hasAttribute("data-page")&&(a.page(d.getAttribute("data-page")),b.preventDefault(c))}),a.table.parentNode.insertBefore(c,a.table),b.append(a.container,a.table),a.rect=b.getBoundingRect(a.table),a.rows=Array.prototype.slice.call(a.tbody.rows),k.mixin(a),a.update(),a.options.fixedHeight&&h.call(a),a.options.fixedColumns){var m=a.table.tHead.rows[0].cells;b.each(m,function(c,d){var e=b.getBoundingRect(d),f=e.width/a.rect.width*100;d.style.width=f+"%"})}},d=function(){var a=this,b=a.options.perPage,c=a.searching?a.searchData:a.rows;a.pages=c.map(function(a,d){return d%b===0?c.slice(d,d+b):null}).filter(function(a){return a}),a.totalPages=a.lastPage=a.pages.length},e=function(){var a=this;if(a.totalPages){a.currentPage>a.totalPages&&(a.currentPage=1);var c=a.currentPage-1,d=b.createFragment();switch(b.each(a.pages[c],function(a,c){b.append(d,c)}),a.clear(d),a.onFirstPage=!1,a.onLastPage=!1,a.currentPage){case 1:a.onFirstPage=!0;break;case a.lastPage:a.onLastPage=!0}}var i,e=0,f=0,g=0;a.totalPages&&(e=a.currentPage-1,f=e*a.options.perPage,g=f+a.pages[e].length,f+=1,i=a.searching?a.searchData.length:a.rows.length),a.label.innerHTML=["Showing ",f," to ",g," of ",i," rows"].join(""),a.options.fixedHeight&&1==a.currentPage&&h.call(a)},f=function(){var a=this;if(b.flush(a.paginator,a.isIE),!(a.totalPages<=1)){var c=b.createFragment(),d=a.options.hideNavs?"hidden":"disabled",e=a.onFirstPage?1:a.currentPage-1,f=a.onlastPage?a.totalPages:a.currentPage+1;a.options.firstLast&&b.append(c,b.button(a.onFirstPage?d:"",1,a.options.firstText)),a.options.nextPrev&&b.append(c,b.button(a.onFirstPage?d:"",e,a.options.prevText));var g=a.links;a.options.truncatePager&&(g=i(a.links,a.currentPage,a.pages.length,a.options.pagerDelta)),b.addClass(a.links[a.currentPage-1],"active"),b.each(g,function(a,d){b.removeClass(d,"active"),b.append(c,d)}),b.addClass(a.links[a.currentPage-1],"active"),a.options.nextPrev&&b.append(c,b.button(a.onLastPage?d:"",f,a.options.nextText)),a.options.firstLast&&b.append(c,b.button(a.onLastPage?d:"",a.totalPages,a.options.lastText)),b.append(a.paginator,c)}},g=function(a,b){var c,d;1===b?(c=0,d=a.length):b===-1&&(c=a.length-1,d=-1);for(var e=!0;e;){e=!1;for(var f=c;f!=d;f+=b)if(a[f+b]&&a[f].value>a[f+b].value){var g=a[f],h=a[f+b],i=g;a[f]=h,a[f+b]=i,e=!0}}return a},h=function(){this.container.style.height=null,this.rect=b.getBoundingRect(this.container),this.container.style.height=this.rect.height+"px"},i=function(a,c,d,e){e=e||2;var f,g=2*e,h=c-e,i=c+e,j=[],k=[];c<4-e+g?i=3+g:c>d-(3-e+g)&&(h=d-(2+g));for(var l=1;l<=d;l++)if(1==l||l==d||l>=h&&l<=i){var m=a[l-1];b.removeClass(m,"active"),j.push(m)}return b.each(j,function(c,d){var e=d.children[0].getAttribute("data-page");if(f){var g=f.children[0].getAttribute("data-page");if(e-g==2)k.push(a[g]);else if(e-g!=1){var h=b.createElement("li",{class:"ellipsis",html:'<a href="#">&hellip;</a>'});k.push(h)}}k.push(d),f=d}),k},j=function(){var a=this.options.data,c=!1,d=!1;if(a.headings){c=b.createElement("thead");var e=b.createElement("tr");b.each(a.headings,function(a,c){var d=b.createElement("th",{html:c});e.appendChild(d)}),c.appendChild(e)}a.rows&&(d=b.createElement("tbody"),b.each(a.rows,function(a,c){var e=b.createElement("tr");b.each(c,function(a,c){var d=b.createElement("td",{html:c});e.appendChild(d)}),d.appendChild(e)})),c&&(null!==this.table.tHead&&this.table.removeChild(this.table.tHead),b.append(this.table,c)),d&&(this.table.tBodies.length&&this.table.removeChild(this.table.tBodies[0]),b.append(this.table,d))},k=function(){};return k.prototype={on:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},off:function(a,b){this._events=this._events||{},a in this._events!=!1&&this._events[a].splice(this._events[a].indexOf(b),1)},emit:function(a){if(this._events=this._events||{},a in this._events!=!1)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},k.mixin=function(a){for(var b=["on","off","emit"],c=0;c<b.length;c++)"function"==typeof a?a.prototype[b[c]]=k.prototype[b[c]]:a[b[c]]=k.prototype[b[c]];return a},l.prototype.update=function(){var a=this;d.call(a),e.call(a),a.links=[];for(var c=a.pages.length;c--;){var g=c+1;a.links[c]=b.button(0===c?"active":"",g,g)}f.call(a),a.emit("datatable.update")},l.prototype.search=function(a){var c=this;return a=a.toLowerCase(),c.currentPage=1,c.searching=!0,c.searchData=[],a.length?(c.clear(),b.each(c.rows,function(d,e){var f=b.includes(c.searchData,e);b.includes(e.textContent.toLowerCase(),a)&&!f&&c.searchData.push(e)}),c.searchData.length||c.setMessage("No entries found."),c.update(),void c.emit("datatable.search",a,c.searchData)):(c.searching=!1,c.update(),void c.emit("datatable.search",a,c.searchData))},l.prototype.page=function(a){var b=this;a!=b.currentPage&&(isNaN(a)||(b.currentPage=parseInt(a,10)),a>b.pages.length||a<0||(e.call(b),f.call(b),b.emit("datatable.page",a)))},l.prototype.sortColumn=function(a,c){var e,d=this,f=d.searching?d.searchData:d.rows,h=[],i=[],j=0,k=0,l=d.table.tHead.rows[0].cells[a];b.each(f,function(a,b){var c=b.cells[l.idx],d=c.textContent,e=d.replace(/(\$|\,|\s)/g,"");parseFloat(e)==e?i[k++]={value:Number(e),row:b}:h[j++]={value:d,row:b}});var m,n;b.hasClass(l,"asc")||"asc"==c?(m=g(h,-1),n=g(i,-1),e="descending",b.removeClass(l,"asc"),b.addClass(l,"desc")):(m=g(i,1),n=g(h,1),e="ascending",b.removeClass(l,"desc"),b.addClass(l,"asc")),this.lastTh&&l!=this.lastTh&&(b.removeClass(this.lastTh,"desc"),b.removeClass(this.lastTh,"asc")),this.lastTh=l,f=m.concat(n),d.searching?(d.searchData=[],b.each(f,function(a,b){d.searchData.push(b.row)})):(d.rows=[],b.each(f,function(a,b){d.rows.push(b.row)})),d.update(),d.emit("datatable.sort",a,e)},l.prototype.addRows=function(a){if("[object Object]"!==Object.prototype.toString.call(a))throw new Error("Function addRows: The method requires an object.");if(!a.rows)throw new Error("Function addRows: Your object is missing the 'rows' property.");var c=this;b.each(a.rows,function(a,d){var e=b.createElement("tr");b.each(d,function(a,c){var d=b.createElement("td",{html:c});e.appendChild(d)}),c.rows.push(e)}),this.update()},l.prototype.refresh=function(){this.input.value="",this.searching=!1,this.update(),this.emit("datatable.refresh")},l.prototype.clear=function(a){this.tbody&&b.flush(this.tbody,this.isIE);var c=this.tbody;this.tbody||(c=this.table),a&&b.append(c,a)},l.prototype.setMessage=function(a){var c=this.table.tHead.rows[0].cells.length;this.clear(b.createElement("tr",{html:'<td class="dataTables-empty" colspan="'+c+'">'+a+"</td>"}))},l});
